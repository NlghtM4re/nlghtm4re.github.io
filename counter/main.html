<!DOCTYPE html>
<html>
<head>
  <title>Global Counter</title>
</head>
<body>
  <h1>ğŸŒ Global Counter</h1>
  <h2 id="count">Loading...</h2>
  <button id="btn">+1</button>

  <script type="module">
    // Import Firebase functions
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAQ8hwInUpT050ZgOY3J5IHwXXByPhS5uI",
      authDomain: "counter-7e3e2.firebaseapp.com",
      databaseURL: "https://counter-7e3e2-default-rtdb.firebaseio.com",
      projectId: "counter-7e3e2",
      storageBucket: "counter-7e3e2.firebasestorage.app",
      messagingSenderId: "1095835005773",
      appId: "1:1095835005773:web:26b3b279d52dbb2e64fd04",
      measurementId: "G-PKK7P26S6D"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Get references to elements
    const countEl = document.getElementById("count");
    const btn = document.getElementById("btn");

    // Reference to the counter in the database
    const countRef = ref(db, "counter/value");

    // Listen for realtime updates
    onValue(countRef, (snapshot) => {
      countEl.textContent = snapshot.val() ?? 0;
    });

    // Increment the counter when button clicked
    btn.addEventListener("click", () => {
      runTransaction(countRef, (currentValue) => {
        return (currentValue || 0) + 1;
      });
    });
  </script>
</body>
</html>
